<%- include('layout/header')%>
<div class="container">
     <div class="row my-4">
     <div class="d-flex justify-content-end pb-3">
      <input class=" px-2" id="search" placeholder="search user name" />
        <button
        class="ms-2 p-2 fas fa-search bg-light"
        onclick="searchUser()"
        type="button"
      ></button>
    </div>
        <div class="col-lg-12">
            <div class="table-responsive">
                <% if (users !='') { %>
                    <table class="table table-striped text-center">
                        <thead>
                            <tr class="table-dark">
                                <th>ID</th>
                                <th>Name</th>
                                <th>E-mail</th>
                                <th>phone</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                          <% users.forEach((row,index) => { %>
                              <tr>
                                  <td><%= index %></td>
                                  <td><%= row.name %></td>
                                  <td><%= row.email %></td>
                                  <td><%= row.phone %></td>
                                  <td>
                                    <a href="/edit/<%= row._id %>" class="text-succes"><i class="fas fa-edit fa-lg mx-1"></i></a>
                                    <a href="/delete/<%= row._id %>" class="text-danger"><i class="fas fa-trash fa-lg mx-1"></i></a>
                                  </td>
                              </tr>
                          <% }) %>
                      </tbody>
                    </table>
                <% } else { %>
                    <h1 class="text-center text-secondary mt-5"> no users found</h1>
                  <%} %>
            </div>
        </div>
     </div>
</div>
<script>
    function searchUser() {
      const searchValue = document.getElementById("search").value.toLowerCase();
      const rows = document.querySelectorAll("table tbody tr");
      rows.forEach((row) => {
        let name = row.querySelector("#find").innerText.toLowerCase();
        if (name === searchValue) {
          row.style.display = "";
        } else {
          row.style.display = "none";
        }
      });
    }
  </script>

  


<%- include('layout/footer')%>



